Feature: 查詢住宿列表

  Background:
    Given 系統中有以下旅遊計畫：
      | id | 計畫名稱       | 參與人數 |
      | 1  | 2024 東京自由行 | 2        |
      | 2  | 2024 大阪美食   | 3        |

  # ========== 後置條件 ==========

  Rule: 後置（回應）- 若指定旅遊計畫ID應回傳該計畫下的住宿列表

    Example: 查詢特定計畫的住宿列表
      Given 旅遊計畫 1 中有以下住宿選項：
        | 住宿名稱     | 地點 | 每晚價格 | 入住天數 | 總價  | 備註     | 來源網址                   |
        | 東京車站飯店 | 東京 | 3000     | 3        | 9000  | 交通方便 | https://booking.com/tokyo1 |
        | 新宿王子     | 新宿 | 2500     | 3        | 7500  | 購物方便 | https://booking.com/tokyo2 |
      And 旅遊計畫 2 中有以下住宿選項：
        | 住宿名稱   | 地點 | 每晚價格 | 入住天數 | 總價  |
        | 大阪難波   | 大阪 | 2800     | 2        | 5600  |
      When 用戶 "Alice" 查詢旅遊計畫 1 的住宿列表
      Then 操作成功
      And 查詢結果應包含：
        | 住宿名稱     | 地點 | 每晚價格 | 入住天數 | 總價  | 備註     | 來源網址                   |
        | 東京車站飯店 | 東京 | 3000     | 3        | 9000  | 交通方便 | https://booking.com/tokyo1 |
        | 新宿王子     | 新宿 | 2500     | 3        | 7500  | 購物方便 | https://booking.com/tokyo2 |

  Rule: 後置（回應）- 若未指定旅遊計畫ID應回傳所有住宿列表

    Example: 查詢所有住宿列表
      Given 旅遊計畫 1 中有以下住宿選項：
        | 住宿名稱     | 地點 | 每晚價格 | 入住天數 | 總價  |
        | 東京車站飯店 | 東京 | 3000     | 3        | 9000  |
      And 旅遊計畫 2 中有以下住宿選項：
        | 住宿名稱   | 地點 | 每晚價格 | 入住天數 | 總價  |
        | 大阪難波   | 大阪 | 2800     | 2        | 5600  |
      When 用戶 "Alice" 查詢所有住宿列表
      Then 操作成功
      And 查詢結果應包含：
        | 住宿名稱     | 地點 | 每晚價格 | 入住天數 | 總價  |
        | 東京車站飯店 | 東京 | 3000     | 3        | 9000  |
        | 大阪難波     | 大阪 | 2800     | 2        | 5600  |

  Rule: 後置（回應）- 若無住宿記錄應回傳空列表

    Example: 無住宿記錄時回傳空列表
      When 用戶 "Alice" 查詢旅遊計畫 1 的住宿列表
      Then 操作成功
      And 查詢結果應為空列表

  Rule: 後置（回應）- 結果應按新增時間排序

    Example: 住宿列表按新增時間排序
      Given 旅遊計畫 1 中依序新增以下住宿選項：
        | 住宿名稱     | 地點 | 每晚價格 | 入住天數 | 新增時間            |
        | 新宿王子     | 新宿 | 2500     | 3        | 2024-01-01 10:00:00 |
        | 東京車站飯店 | 東京 | 3000     | 3        | 2024-01-01 11:00:00 |
      When 用戶 "Alice" 查詢旅遊計畫 1 的住宿列表
      Then 操作成功
      And 查詢結果順序應為：
        | 順序 | 住宿名稱     |
        | 1    | 新宿王子     |
        | 2    | 東京車站飯店 |
